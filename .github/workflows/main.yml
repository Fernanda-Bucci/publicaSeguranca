name: CI-CD
on:
  push: 
    branches: ["main"]
  workflow_dispatch:

jobs: 
  CI:
    runs-on: ubuntu-latest
    steps: 
        - name: Obter c√≥digo
          uses: actions/checkout@v4.2.0 
        - name: Docker Login
          uses: docker/login-action@v3.3.0
          with:
            username: ${{ secrets.DOCKER_USER }}
            password: ${{ secrets.DOCKER_PWD }}
        - name: Build and push Docker images
          uses: docker/build-push-action@v6.9.0
          with:
            context: .
            file: ./segurancaPublica/segurancaPublica/Dockerfile
            push: true
            tags: |
              fernandabucci1910/publicaseguranca:${{ github.run_number }}
              fernandabucci1910/publicaseguranca:latest

